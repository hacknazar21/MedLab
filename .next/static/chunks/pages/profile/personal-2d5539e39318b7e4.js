(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[756],{1455:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/personal",function(){return n(8269)}])},873:function(e,a,n){"use strict";var r=n(6042),t=n(9396),s=n(5893),l=n(7294);a.Z=function(e){var a=(0,l.useRef)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("input",(0,t.Z)((0,r.Z)({},e),{ref:a,onChange:function(a){if(a.target){var n=a.target,r=function(e){return null===e||void 0===e?void 0:e.value.replace(/\D/g,"")}(n),t=n.selectionStart,s="";if(!r)return n.value="";if(n.value.length!=t)return void(a.data&&/\D/g.test(a.data)&&(n.value=r));if(["7","8","9"].indexOf(r[0])>-1){"9"==r[0]&&(r="7"+r);var l="8"==r[0]?"8":"+7";s=n.value=l+" ",r.length>1&&(s+="("+r.substring(1,4)),r.length>=5&&(s+=") "+r.substring(4,7)),r.length>=8&&(s+="-"+r.substring(7,9)),r.length>=10&&(s+="-"+r.substring(9,11))}else s="+"+r.substring(0,16);n.value=s,e.changeHandler("phone_number",s)}}}))})}},8269:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return g}});var r=n(7568),t=n(6042),s=n(1351),l=n(4051),i=n.n(l),o=n(5893),u=n(7294),c=n(9948),m=n(1635),p=n(9008),f=n.n(p),d=n(49),h=n(5794),_=n(1487),v=n(873),x=n(9649),j=function(e){var a=(0,u.useState)({lastname:"",firstname:"",phone_number:"",email:"",address:"",password:"\u0417\u0434\u0435\u0441\u044c \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u0430\u0440\u043e\u043b\u044c",avatar:null,avatarPreview:""}),n=a[0],s=a[1],l=(0,x.Z)(),m=l.request,p=(l.error,l.loading,l.isOk,(0,u.useContext)(c.V).token);(0,u.useEffect)((function(){s((function(a){return a.avatarPreview=e.userInfo.avatar,(0,t.Z)({},a,e.userInfo)}))}),[e.userInfo]);var f=function(e){s((function(a){return a[e.target.name]=e.target.value,(0,t.Z)({},a)}))},d=function(){var e=(0,r.Z)(i().mark((function e(a){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in e.prev=0,r=new FormData,n)"avatar"===t&&"string"!==typeof n[t]&&"avatar"===t?r.set(t,new Blob([n[t]],{type:n[t].type}),n[t].type.replace("/",".")):r.set(t,n[t]);return e.next=5,m("http://192.168.0.108:8081/api/user/updateinfo","POST",r,{Authorization:"Bearer ".concat(p)},!0);case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{className:"personal__title profile-title",children:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,o.jsx)("div",{className:"personal__form",children:(0,o.jsxs)("div",{className:"personal__form-inputs",children:[(0,o.jsxs)("div",{className:"personal__form-input-header",children:[(0,o.jsx)("div",{className:"personal__form-input-avatar",children:(0,o.jsx)("img",{src:n.avatarPreview,alt:""})}),(0,o.jsx)("input",{onChange:function(e){s((function(a){return a.avatarPreview=URL.createObjectURL(e.target.files[0]),console.log(e.target.files[0]),a.avatar=e.target.files[0],(0,t.Z)({},a)}))},type:"file",id:"avatar-input",name:"avatar",className:"personal__form-input-file"}),(0,o.jsx)("label",{htmlFor:"avatar-input",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e"})]}),(0,o.jsxs)("div",{className:"personal__form-inputs-main",children:[(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)("input",{onChange:f,type:"text",id:"lastname",name:"lastname",className:"auth-form__input",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:n.lastname}),(0,o.jsx)("label",{htmlFor:"lastname",className:"auth-form__label",children:" \u0424\u0430\u043c\u0438\u043b\u0438\u044f "})]}),(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)("input",{onChange:f,type:"text",id:"firstname",name:"firstname",className:"auth-form__input",placeholder:"\u0418\u043c\u044f",value:n.firstname}),(0,o.jsx)("label",{htmlFor:"firstname",className:"auth-form__label",children:" \u0418\u043c\u044f "})]}),(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)(v.Z,{changeHandler:function(e,a){s((function(n){return n[e]=a,(0,t.Z)({},n)}))},type:"text",id:"phone_number",name:"phone_number",className:"auth-form__input",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",value:n.phone_number}),(0,o.jsx)("label",{htmlFor:"phone_number",className:"auth-form__label",children:" \u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 "})]}),(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)("input",{onChange:f,type:"text",id:"email",name:"email",className:"auth-form__input",placeholder:"Email",value:n.email}),(0,o.jsx)("label",{htmlFor:"email",className:"auth-form__label",children:" Email "})]}),(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)("input",{onChange:f,type:"text",id:"address",name:"address",className:"auth-form__input",placeholder:"\u0410\u0434\u0440\u0435\u0441",value:n.address}),(0,o.jsx)("label",{htmlFor:"address",className:"auth-form__label",children:" \u0410\u0434\u0440\u0435\u0441 "})]}),(0,o.jsxs)("div",{className:"personal__form-input-box",children:[(0,o.jsx)("input",{onChange:f,type:"password",id:"password",name:"password",className:"auth-form__input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:n.password}),(0,o.jsx)("label",{htmlFor:"password",className:"auth-form__label",children:" \u041f\u0430\u0440\u043e\u043b\u044c "})]})]}),(0,o.jsx)("button",{onClick:d,className:"personal__form-submit",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})]})})]})};function g(e){e=null!==e?e:(0,s.Z)(new TypeError("Cannot destructure undefined"));var a=(0,u.useContext)(c.V).isAuth,n=(0,u.useState)({avatar:"",username:"",firstname:"",lastname:"",address:"",email:"",phone_number:""}),l=n[0],p=n[1],v=(0,u.useContext)(c.V).token,g=(0,x.Z)(),b=g.request;g.error,g.clearError,g.clearSuccess,g.success,g.loading;return(0,u.useEffect)((function(){v&&(0,r.Z)(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b("/api/user/info","GET",null,{Authorization:"Bearer ".concat(v),Accept:"application/json"});case 3:(a=e.sent).username&&p((function(e){return(0,t.Z)({},a)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[v]),(0,u.useEffect)((function(){console.log(l)}),[l]),a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(f(),{children:[(0,o.jsx)("title",{children:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,o.jsx)("meta",{charSet:"utf-8"}),(0,o.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,o.jsx)("div",{className:"wrapper another",children:(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(h.M,{sugar:[{title:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",href:"/"},{title:"\u041b\u0438\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",href:""}]}),(0,o.jsxs)("main",{className:"page profile",children:[(0,o.jsx)(_.x,{userInfo:{avatar:l.avatar,name:l.username}}),(0,o.jsx)("div",{className:"profile__content",children:(0,o.jsx)(j,{userInfo:l})})]})]})})]}):(0,o.jsx)(m.default,{})}}},function(e){e.O(0,[664,49,201,774,888,179],(function(){return a=1455,e(e.s=a);var a}));var a=e.O();_N_E=a}]);